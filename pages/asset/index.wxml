<import src="/template/login/index.wxml" />

<view class="asset-container">
  <!-- é¡¶éƒ¨è£…é¥°èƒŒæ™¯ -->
  <view class="header-bg">
    <view class="bg-circle circle-1"></view>
    <view class="bg-circle circle-2"></view>
    <view class="bg-circle circle-3"></view>
  </view>

  <!-- èµ„äº§å¡ç‰‡ -->
  <view class="asset-card">
    <view class="asset-header">
      <view class="header-title">æˆ‘çš„èµ„äº§</view>
      <view class="header-subtitle">Asset Overview</view>
    </view>
    
    <view class="balance-main">
      <view class="balance-label">å¯ç”¨ä½™é¢(å…ƒ)</view>
      <view class="balance-amount">
        <text class="currency-symbol">Â¥</text>
        <text class="amount-number">{{balance}}</text>
      </view>
    </view>

    <view class="asset-stats">
      <view class='stat-item'>
        <view class="stat-value">Â¥{{freeze}}</view>
        <view class="stat-label">å†»ç»“é‡‘é¢</view>
      </view>
      <view class="stat-divider"></view>
      <view class='stat-item'>
        <view class="stat-value">Â¥{{totleConsumed}}</view>
        <view class="stat-label">ç´¯è®¡æ¶ˆè´¹</view>
      </view>
    </view>
  </view>

  <!-- æ“ä½œæŒ‰é’®åŒº -->
  <view class='action-buttons'>
    <button class="action-btn btn-primary" hover-class="btn-hover" bind:tap="recharge">
      <view class="btn-icon">ğŸ’°</view>
      <view class="btn-text">å……å€¼</view>
    </button>
    <button class='action-btn btn-primary' hover-class="btn-hover" bind:tap="payDeposit">
      <view class="btn-icon">ğŸ”’</view>
      <view class="btn-text">æŠ¼é‡‘</view>
    </button>
    <button wx:if="{{ withdrawal == '1' }}" class='action-btn btn-primary' hover-class="btn-hover" bind:tap="withdraw">
      <view class="btn-icon">ğŸ’¸</view>
      <view class="btn-text">æç°</view>
    </button>
  </view>
</view>

<!-- äº¤æ˜“è®°å½•åŒºåŸŸ -->
<view class="records-section">
  <van-tabs active="{{ active }}" bind:change="tabClick" color="#5B7FFF" title-active-color="#5B7FFF">
    <van-tab wx:for="{{tabs}}" wx:key="*this" title="{{item}}" />
  </van-tabs>
  
  <view class="filter-section" wx:if="{{activeIndex == 0}}">
    <picker mode="date" value="{{ dateAddBegin }}" bindchange="dateAddBeginChange">
      <van-cell title="äº¤æ˜“å¼€å§‹æ—¥æœŸ" value="{{ dateAddBegin ? dateAddBegin : 'è¯·é€‰æ‹©' }}" is-link border="{{false}}" />
    </picker>
    <picker mode="date" value="{{ dateAddEnd }}" bindchange="dateAddEndChange">
      <van-cell title="äº¤æ˜“ç»“æŸæ—¥æœŸ" value="{{ dateAddEnd ? dateAddEnd : 'è¯·é€‰æ‹©' }}" is-link border="{{false}}" />
    </picker>
  </view>
  
  <view class="list-container">
    <van-cell-group wx:if="{{activeIndex == 0}}" border="{{false}}">
      <van-empty wx:if="{{!cashlogs}}" description="æš‚æ— èµ„é‡‘æ˜ç»†" />
      <van-cell wx:for="{{cashlogs}}" wx:key="index" title="{{ item.typeStr }}" label="{{ item.dateAdd }}" value="{{ item.amount }}" border="{{false}}" />
    </van-cell-group>
    <van-cell-group wx:if="{{activeIndex == 1}}" border="{{false}}">
      <van-empty wx:if="{{!withDrawlogs}}" description="æš‚æ— æç°è®°å½•" />
      <van-cell wx:for="{{withDrawlogs}}" wx:key="index" title="{{ item.statusStr }}" label="{{ item.dateAdd }}{{ item.rejectionReason ? ' é©³å›åŸå› ï¼š' + item.rejectionReason : '' }}" border="{{false}}">
        <view slot="">
          <view class="price"><text>ï¿¥</text>{{ item.money }}</view>
          <view wx:if="{{ item._fundStatus }}" class="extra-status">èµ„é‡‘çŠ¶æ€ï¼š{{ item._fundStatus }}</view>
          <view wx:if="{{ item.status == 3 }}">
            <van-button type="primary" size="mini" bind:click="confirmTX" data-item="{{ item }}" color="#5B7FFF">ç¡®è®¤æ”¶æ¬¾</van-button>
          </view>
        </view>
      </van-cell>
    </van-cell-group>
    <van-cell-group wx:if="{{activeIndex == 2}}" border="{{false}}">
      <van-empty wx:if="{{!depositlogs}}" description="æš‚æ— æŠ¼é‡‘è®°å½•" />
      <van-cell wx:for="{{depositlogs}}" wx:key="index" title="{{ item.statusStr }}" label="{{ item.dateAdd }}" border="{{false}}">
        <view slot="">
          <view class="price"><text>ï¿¥</text>{{ item.amount }}</view>
          <view wx:if="{{ item.status == 1 }}">
            <van-button type="primary" size="mini" color="#5B7FFF" data-item="{{ item }}" bind:click="depositBackApplyV2">ç”³è¯·é€€å›</van-button>
          </view>
        </view>
      </van-cell>
    </van-cell-group>
  </view>
</view>

